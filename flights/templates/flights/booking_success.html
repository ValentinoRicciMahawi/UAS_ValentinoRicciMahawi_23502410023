{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Successful</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div class="container">
        <div class="window">
            <div class="window-header">
                <div class="window-buttons">
                    <button class="window-button close"></button>
                    <button class="window-button minimize"></button>
                    <button class="window-button maximize"></button>
                </div>
            </div>
            <div class="window-content">
                <div class="success-message">
                    <h2>üéâ Booking Successful!</h2>
                    <p>Your flight has been booked successfully. Reference ID: #{{ booking.id }}</p>
                </div>
                
                <div class="booking-info">
                    <div class="info-section">
                        <h3>üìã Booking Summary</h3>
                        <div class="info-row">
                            <span class="info-label">Booking ID:</span>
                            <span class="info-value" style="font-weight: 700; color: #667eea;">#{{ booking.id }}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Flight Code:</span>
                            <span class="info-value">{{ booking.flight_code }}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Trip Type:</span>
                            <span class="info-value" style="font-weight: 700;">
                                {% if is_round_trip %}
                                ‚ÜîÔ∏è ROUND TRIP
                                {% else %}
                                ‚Üí ONE WAY
                                {% endif %}
                            </span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Booking Date:</span>
                            <span class="info-value">{{ booking.booking_date|date:"d M Y, H:i" }}</span>
                        </div>
                    </div>
                    
                    {% if flight_info %}
                    <div class="info-section" style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                        <h3 style="color: #667eea;">‚úàÔ∏è Outbound Flight Details</h3>
                        <div class="info-row">
                            <span class="info-label">Route:</span>
                            <span class="info-value">
                                {{ flight_info.outbound.departure_iata }} ‚Üí {{ flight_info.outbound.arrival_iata }}
                            </span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Flight:</span>
                            <span class="info-value">
                                {{ flight_info.outbound.carrier }}{{ flight_info.outbound.number }}
                            </span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Departure:</span>
                            <span class="info-value">{{ flight_info.outbound.departure_time|slice:":16" }}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Arrival:</span>
                            <span class="info-value">{{ flight_info.outbound.arrival_time|slice:":16" }}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Duration:</span>
                            <span class="info-value">{{ flight_info.outbound.duration|slice:"2:" }}</span>
                        </div>
                    </div>
                    
                    {% if flight_info.return %}
                    <div class="info-section" style="background: #fff3cd; padding: 20px; border-radius: 8px;">
                        <h3 style="color: #856404;">‚úàÔ∏è Return Flight Details</h3>
                        <div class="info-row">
                            <span class="info-label">Route:</span>
                            <span class="info-value">
                                {{ flight_info.return.departure_iata }} ‚Üí {{ flight_info.return.arrival_iata }}
                            </span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Flight:</span>
                            <span class="info-value">
                                {{ flight_info.return.carrier }}{{ flight_info.return.number }}
                            </span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Departure:</span>
                            <span class="info-value">{{ flight_info.return.departure_time|slice:":16" }}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Arrival:</span>
                            <span class="info-value">{{ flight_info.return.arrival_time|slice:":16" }}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Duration:</span>
                            <span class="info-value">{{ flight_info.return.duration|slice:"2:" }}</span>
                        </div>
                    </div>
                    {% endif %}
                    
                    {% else %}
                    <div class="info-section">
                        <h3>‚úàÔ∏è Flight Details</h3>
                        <div class="info-row">
                            <span class="info-label">Route:</span>
                            <span class="info-value">
                                {{ booking.departure_city }} ‚Üí {{ booking.arrival_city }}
                            </span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Departure Date:</span>
                            <span class="info-value">{{ booking.departure_date }}</span>
                        </div>
                        {% if booking.return_date %}
                        <div class="info-row">
                            <span class="info-label">Return Date:</span>
                            <span class="info-value">{{ booking.return_date }}</span>
                        </div>
                        {% endif %}
                    </div>
                    {% endif %}
                    
                    <div class="info-section">
                        <h3>üë§ Passenger Information</h3>
                        <div class="info-row">
                            <span class="info-label">Name:</span>
                            <span class="info-value">{{ booking.passenger_name }}</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Passport Number:</span>
                            <span class="info-value">{{ booking.passport_number }}</span>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3>üí∞ Payment Information</h3>
                        <div class="info-row">
                            <span class="info-label">Total Price:</span>
                            <span class="info-value" style="color: #667eea; font-size: 24px; font-weight: 700;">
                                {% if flight_info %}
                                {{ flight_info.currency }} {{ booking.price }}
                                {% else %}
                                Rp {{ booking.price }}
                                {% endif %}
                            </span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Price includes:</span>
                            <span class="info-value">
                                {% if is_round_trip %}
                                ‚úì Outbound flight<br>‚úì Return flight<br>‚úì All taxes and fees
                                {% else %}
                                ‚úì One-way flight<br>‚úì All taxes and fees
                                {% endif %}
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-info">
                    <strong>üìß Next Steps:</strong>
                    <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                        <li>A confirmation email will be sent to your registered email address</li>
                        <li>Please check-in online 24 hours before departure</li>
                        <li>Arrive at the airport at least 2 hours before departure</li>
                        <li>Bring your passport and this booking reference (#{{ booking.id }})</li>
                        {% if is_round_trip %}
                        <li>Don't forget your return flight details!</li>
                        {% endif %}
                    </ul>
                </div>
                
                <div style="margin-top: 30px; text-align: center;">
                    <a href="{% url 'search_flight' %}" class="btn btn-primary" style="width: auto; display: inline-block;">
                        Book Another Flight
                    </a>
                </div>
                
                <div style="margin-top: 20px; padding: 20px; background: #f8f9fa; border-radius: 8px; text-align: center;">
                    <p style="color: #666; margin: 0;">
                        Thank you for using our flight booking system! 
                        <br>Have a safe journey! ‚úàÔ∏è
                    </p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>